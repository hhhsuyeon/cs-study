# URL 단축기 설계
## 1단계 - 문제 이해 및 설계 범위 확정
* 질문을 통해 추린 요구사항 정리
    1. URL 단축 : 주어진 긴 URL을 훨씬 짧게 줄인다.
    2. URL 리디렉션 : 축약된 URL로 HTTP 요청이 오면 원래 URL로 안내
    3. 높은 가용성과 규모 확장성, 장애 감내가 요구됨
<details>
    <summary> 개략적 추정 </summary>
    1. 쓰기 연산 : 매일 1억 개의 단축 URL 생성</br>
    2. 초당 쓰기 연산: 1억/24/3600=1160</br>
    3. 읽기 연산 : 읽기 연산과 쓰기 연산 비율은 10:1, 그 경우 읽기 연산은 초당 11,600회 발생</br>
    4. URL 단축 서비스를 10년간 운영한다고 가정하면 1억 x 365 x 10 = 3650억 개의 레코드를 보관해야 한다.</br>
    5. 축약 전 URL의 평균 길이는 100 -> 따라서 10년 동안 필요한 저장 용량은 3650억 x 100바이트 = 36.5TB</br>     
</details>
    
## 2단계 - 개략적 설계안 제시 및 동의 구하기
* API 엔드포인트, URL 리디렉션, URL 단축 플로

### API 엔드포인트
* 클라이언트는 서버가 제공하는 엔드포인트를 통해 서버와 통신한다.
* 이 엔드포인트를 REST API로 설계한다.
* URL 단축기는 기본적으로 두 개의 엔드포인트를 필요로 한다.

1. URL 단축용 엔드포인트 : 새 단축 URL을 생성하고자 하는 클라이언트는 이 엔드포인트에 단축할 URL을 인자로 실어서 POST 요청을 보내야 한다.

    ```bash
    # POST/api/v1/data/shorten
    - 인자 : {longUrl: longURLstring!}
    - 반환 : 단축 URL
    ```

2. URL 리디렉션용 엔드포인트 : 단축 URL에 대해서 HTTP 요청이 오면 원래 URL로 보내주기 위한 용도의 엔드포인트

    ```bash
    # GET/api/v1/shortUrl
    - 반환 : HTTP 리디렉션 목적지가 될 원래 URL
    ```
### URL 리디렉션
![simple](../image/8-1.png)
